@startuml
title Memento

skinparam legendBackgroundColor #f9f9f9
skinparam legendBorderColor #999999

legend right
**Intent**: Capture and externalize an objectâ€™s internal state without breaking encapsulation; restore later.

**Use when**: Undo/rollback; checkpoints.

**Key participants**: Originator, Memento, Caretaker.
endlegend

class Originator {
  -state
  +save() : Memento
  +restore(m: Memento)
}

class Memento <<opaque>> {
  -internalState
}

class Caretaker {
  -history : List<Memento>
  +push(m: Memento)
  +pop() : Memento
}

Caretaker o-- Memento
Originator ..> Memento : create/restore
@enduml